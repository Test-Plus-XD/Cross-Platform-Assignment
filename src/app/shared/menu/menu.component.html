<!-- Ion menu content; type is set on ion-menu in shell (push style) -->
<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="px-2">{{ (lang$ | async) === 'TC' ? 'é¸å–®' : 'Menu' }}</ion-title>
  </ion-toolbar>
</ion-header>

<div class="shared-menu">
  <!-- Main Navigation -->
  <ion-list class="px-2">
    <ion-item button routerLink="/home" (click)="closeMenu()" lines="none" detail="false">
      <ion-icon name="home-outline" slot="start"></ion-icon>
      <ion-label>{{ (lang$ | async) === 'TC' ? 'ä¸»é ' : 'Home' }}</ion-label>
    </ion-item>

    <ion-item button routerLink="/search" (click)="closeMenu()" lines="none" detail="false">
      <ion-icon name="search-outline" slot="start"></ion-icon>
      <ion-label>{{ (lang$ | async) === 'TC' ? 'æœå°‹' : 'Search' }}</ion-label>
    </ion-item>

    <ion-item button routerLink="/user" (click)="closeMenu()" lines="none" detail="false">
      <ion-icon name="person-outline" slot="start"></ion-icon>
      <ion-label>{{ (lang$ | async) === 'TC' ? 'å¸³æˆ¶' : 'Account' }}</ion-label>
    </ion-item>

    <!-- Conditional menu items based on login state and user type -->
    <ng-container *ngIf="appState$ | async as appState">
      <ng-container *ngIf="appState.isLoggedIn">
        <ion-item button routerLink="/chat/main" (click)="closeMenu()" lines="none" detail="false">
          <ion-icon name="chatbubbles-outline" slot="start"></ion-icon>
          <ion-label>{{ (lang$ | async) === 'TC' ? 'èŠå¤©' : 'Chat' }}</ion-label>
        </ion-item>

        <ng-container *ngIf="isRestaurantUser$ | async as isRestaurant">
          <ion-item button routerLink="/store" (click)="closeMenu()" lines="none" detail="false" *ngIf="isRestaurant">
            <ion-icon name="storefront-outline" slot="start"></ion-icon>
            <ion-label>{{ (lang$ | async) === 'TC' ? 'å•†é‹ª' : 'Store' }}</ion-label>
          </ion-item>

          <ion-item button routerLink="/booking" (click)="closeMenu()" lines="none" detail="false" *ngIf="!isRestaurant">
            <ion-icon name="calendar-outline" slot="start"></ion-icon>
            <ion-label>{{ (lang$ | async) === 'TC' ? 'é ç´„' : 'Bookings' }}</ion-label>
          </ion-item>
        </ng-container>
      </ng-container>
    </ng-container>
  </ion-list>
  <br><br><br><br><br><br><br><br><br><br>
  <!-- Settings Section -->
  <div class="settings-section mt-4">
    <ion-list-header class="px-4">
      <ion-label>{{ (lang$ | async) === 'TC' ? 'è¨­å®š' : 'Settings' }}</ion-label>
    </ion-list-header>

    <ion-list class="px-2">
      <!-- Language Toggle -->
      <ion-item lines="none" detail="false" class="settings-item">
        <ion-icon name="language-outline" slot="start"></ion-icon>
        <ion-label>{{ (lang$ | async) === 'TC' ? 'Language' : 'èªè¨€' }}</ion-label>
        <button (click)="toggleLanguage()" class="modern-toggle" aria-label="Toggle language">
          <ng-container *ngIf="(lang$ | async) === 'EN'; else HK">ğŸ‡¬ğŸ‡§ EN</ng-container>
          <ng-template #HK>ğŸ‡­ğŸ‡° ä¸­æ–‡</ng-template>
        </button>
      </ion-item>

      <!-- Theme Toggle -->
      <ion-item lines="none" detail="false" class="settings-item">
        <ion-icon name="contrast-outline" slot="start"></ion-icon>
        <ion-label>{{ (lang$ | async) === 'TC' ? 'é¡è‰²æ¨¡å¼' : 'Colour Mode' }}</ion-label>
        <button (click)="toggleTheme()" class="modern-toggle" aria-label="Toggle theme">
          <ng-container *ngIf="isDark$ | async; else sun">
            <ion-icon name="moon-outline"></ion-icon>
          </ng-container>
          <ng-template #sun>
            <ion-icon name="sunny-outline"></ion-icon>
          </ng-template>
        </button>
      </ion-item>

      <ion-item button (click)="onMenuItemSelected('/settings')" lines="none" detail="false" class="settings-item">
        <ion-icon name="settings-outline" slot="start"></ion-icon>
        <ion-label>{{ (lang$ | async) === 'TC' ? 'æ›´å¤šè¨­å®š' : 'More Settings' }}</ion-label>
      </ion-item>
    </ion-list>
  </div>
</div>