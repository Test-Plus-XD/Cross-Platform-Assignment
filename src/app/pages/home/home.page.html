<ion-content class="bg-slate-50 dark:bg-slate-900 min-h-screen">
  <main class="max-w-6xl mx-auto p-4">
    <!-- Header / Controls -->
    <div class="flex items-center justify-between mb-4">
      <div class="flex items-center gap-3">
        <h1 class="text-xl font-bold dark:text-slate-100">Pour Rice / 倒米</h1>
      </div>

      <div class="flex items-center gap-3">
        <!-- language toggle -->
        <button (click)="setLang('EN')" class="px-2 py-1 rounded-md" title="English">
          <span>🇬🇧</span>
        </button>
        <button (click)="setLang('TC')" class="px-2 py-1 rounded-md" title="繁體中文">
          <span>🇭🇰</span>
        </button>

        <!-- Theme toggle -->
        <button (click)="toggleTheme()" class="ml-2 p-2 rounded-md bg-white dark:bg-slate-800 border">
          <ng-container *ngIf="(isDark$ | async); else light">
            ☾
          </ng-container>
          <ng-template #light>☀</ng-template>
        </button>
      </div>
    </div>

    <!-- Hero / Search -->
    <section class="mb-6">
      <div class="bg-white dark:bg-slate-800 p-6 rounded-lg shadow">
        <div class="flex gap-3">
          <input class="flex-1 p-3 rounded border dark:bg-slate-700 dark:text-slate-100" placeholder="Search restaurants, dishes or locations..." />
          <button class="px-4 py-3 bg-indigo-600 text-white rounded">Search</button>
        </div>
      </div>
    </section>

    <!-- Trending restaurants grid -->
    <section>
      <h2 class="text-lg font-semibold mb-3 dark:text-slate-100">Trending Restaurants</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <ng-container *ngIf="restaurants$ | async as rests">
          <article *ngFor="let r of rests" class="bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden">
            <img [src]="r.image || 'assets/img/placeholder.jpg'" class="w-full h-40 object-cover" alt="{{r.Name_EN}}" />
            <div class="p-4">
              <!-- Show bilingual title according to LanguageService stream -->
              <div *ngIf="lang$ | async as curLang">
                <h3 class="font-semibold text-lg dark:text-slate-50">
                  {{ curLang === 'TC' ? (r.Name_TC || r.Name_EN) : (r.Name_EN || r.Name_TC) }}
                </h3>
                <div class="text-sm text-slate-600 dark:text-slate-300">
                  {{ curLang === 'TC' ? (r.Address_TC || r.Address_EN) : (r.Address_EN || r.Address_TC) }}
                </div>
              </div>

              <p class="mt-2 text-sm text-slate-700 dark:text-slate-300">
                {{ r.Keyword_EN && r.Keyword_EN.length ? r.Keyword_EN.join(', ') : (r.Keyword_TC && r.Keyword_TC.length ? r.Keyword_TC.join(', ') : '-') }}
              </p>

              <div class="mt-3 flex items-center justify-between">
                <div class="text-sm text-slate-800 dark:text-slate-100">★ 4.2</div>
                <a class="text-indigo-600 hover:underline text-sm" [routerLink]="['/restaurant', r.Name_EN]">
                  View
                </a>
              </div>
            </div>
          </article>
        </ng-container>
      </div>
    </section>

    <!-- Footer Promo -->
    <section class="mt-8">
      <div class="bg-white dark:bg-slate-800 p-6 rounded-lg shadow flex items-center justify-between">
        <div>
          <h4 class="font-semibold dark:text-slate-100">Mobile App</h4>
          <p class="text-sm text-slate-600 dark:text-slate-300">Download our app for deals & location features.</p>
        </div>
        <div class="flex gap-2">
          <img src="assets/icon/app_store.png" class="h-10" alt="App Atore" />
          <img src="assets/icon/google_play.png" class="h-10" alt="Google Play" />
        </div>
      </div>
    </section>
  </main>
</ion-content>